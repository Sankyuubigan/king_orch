# Заметки по проекту (Версия 18.1)

- **Исправлен критический баг с вводом текста в UI.** Предыдущий обработчик `<KeyPress>` был слишком агрессивным. Новая версия в `ui.py` перехватывает только комбинации `Ctrl+C` и `Ctrl+V`, а все остальные нажатия клавиш (буквы, цифры и т.д.) обрабатываются стандартно.

- **Внедрен "Умный Диспетчер" для маршрутизации задач.**
    - Создан новый `agents/dispatcher_agent.py`. Его единственная задача - классифицировать запрос пользователя на `coding`, `research` или `general_conversation`.
    - `engine.py` теперь использует этого агента для принятия решения о том, какую команду (`CodingCrew`, `ResearchCrew`) вызывать. Это заменяет старую, ненадежную логику на основе ключевых слов.

- **Интегрированы инструменты для поиска по репозиториям.**
    - Созданы серверы-заглушки `mcp_github_server.py` и `mcp_gitlab_server.py`.
    - `main.py` теперь запускает эти серверы при старте.
    - `tools_config.json` обновлен, чтобы система знала о `github_search` и `gitlab_search`.
    - Промпт агента `SearchAnalystAgent` обновлен, чтобы он знал и мог использовать новые инструменты для поиска кода.
    - В код серверов добавлены заглушки для API-токенов, чтобы в будущем можно было снять ограничения по лимитам запросов.