<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Orchestrator</title>
    <!-- Подключаем стили CopilotKit -->
    <link rel="stylesheet" href="https://unpkg.com/@copilotkit/react-ui/dist/styles.css" />
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; margin: 0; background-color: #f7f7f7; }
        .container { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; text-align: center; }
        h1 { color: #2c3e50; }
        p { color: #34495e; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Подключаем React и ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Подключаем CopilotKit как модули -->
    <script type="module">
        // Импортируем необходимые компоненты
        import { CopilotKit } from "https://unpkg.com/@copilotkit/react-core@0.5.0/dist/index.m.js";
        import { CopilotPopup } from "https://unpkg.com/@copilotkit/react-ui@0.5.0/dist/index.m.js";

        // Используем React.createElement вместо JSX для максимальной надежности
        const e = React.createElement;

        const App = () => {
            return e(
                CopilotKit,
                {
                    // Указываем адрес нашего Python-бэкенда
                    copilotBackendUrl: "http://127.0.0.1:8000/chat"
                },
                // Дочерние элементы
                e(
                    'div',
                    { className: 'container' },
                    e('h1', null, 'The Orchestrator'),
                    e('p', null, 'Нажмите на иконку в правом нижнем углу, чтобы начать чат.')
                ),
                e(
                    CopilotPopup,
                    {
                        instructions: "Ты — умный ассистент-оркестратор.",
                        defaultOpen: true,
                        labels: {
                            title: "Чат с Оркестратором",
                            initial: "Привет! Спроси меня что-нибудь, и я поищу в интернете, если потребуется.",
                        }
                    }
                )
            );
        };

        // Монтируем наше приложение в DOM
        const domContainer = document.querySelector('#root');
        const root = ReactDOM.createRoot(domContainer);
        root.render(e(App));
    </script>
</body>
</html>